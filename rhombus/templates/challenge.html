{% import "icons.html" as icons %}

<dialog
  data-onload-showmodal
  class="backdrop:bg-background/50 bg-background max-w-prose w-full rounded-lg text-foreground border-4 p-6 shadow-lg"
  style="border-color: {{ category.color }}"
  id="challenges-modal"
>
  <div class="mb-2 flex justify-between">
    <div class="font-bold">
      <span style="color: {{ category.color }}">{{ category.name }} / </span>
      <span>{{ challenge.name }}</span>
    </div>
    <div class="flex items-center gap-4">
      <span
        >{{ t("solves-points", solves=challenge.solves, points=challenge.points) }}</span
      >
    </div>
  </div>
  <div class="mb-4">{{ challenge.description }}</div>
  {% with solve=team.solves[challenge.id] %}
    {% if not solve %}
      <form
        class="flex gap-2"
        hx-post="/challenges/{{ challenge.id }}"
        hx-target="next"
      >
        <input
          type="text"
          name="flag"
          placeholder="Enter flag..."
          autocomplete="off"
          class="bg-background border p-2 rounded-lg grow focus-visible:outline-none"
        />
        <button class="border rounded-lg p-2" type="submit">Submit Flag</button>
      </form>
      <div></div>
    {% else %}
      <form
        class="flex gap-2"
        hx-post="/challenges/{{ challenge.id }}/writeup"
        hx-target="next"
      >
        <input
          type="text"
          name="flag"
          placeholder="Enter writeup link..."
          autocomplete="off"
          class="bg-background border p-2 rounded-lg grow focus-visible:outline-none"
        />
        <button class="border rounded-lg p-2" type="submit">
          Submit Writeup
        </button>
      </form>
      <div></div>
    {% endif %}
  {% endwith %}
  <div class="flex gap-2 mt-2">
    <a
      class="pr-2 py-1 pl-1 max-w-fit rounded-lg flex"
      style="background-color: {{ category.color }}77"
      href="/challenges"
    >
      <div class="scale-75">{{ icons.attachment() }}</div>
      file1.zip</a
    >
  </div>
</dialog>
